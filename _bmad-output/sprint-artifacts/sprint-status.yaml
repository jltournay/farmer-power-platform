# Sprint Status - farmer-power-platform
# generated: 2026-01-01
# project: farmer-power-platform
# tracking_system: file-system
# story_location: _bmad-output/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic not yet started
#   - in-progress: Epic actively being worked on
#   - done: All stories in epic completed
#
# Epic Status Transitions:
#   - backlog → in-progress: Automatically when first story is created (via create-story)
#   - in-progress → done: Manually when all stories reach 'done' status
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - ready-for-dev: Story file created in stories folder
#   - blocked: Story cannot proceed until dependency is resolved
#   - in-progress: Developer actively working on implementation
#   - review: Ready for code review (via Dev's code-review workflow)
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - done: Retrospective has been completed
#
# WORKFLOW NOTES:
# ===============
# - Epic transitions to 'in-progress' automatically when first story is created
# - Stories can be worked in parallel if team capacity allows
# - SM typically creates next story after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', then runs code-review (fresh context, different LLM recommended)
#
# PRIORITY ORDER (2026-01-01 update):
# ========================================
# P0: Epic 0 (Done), Epic 1 (Done), Epic 2 (Done), Epic 0.4 (E2E Tests), Epic 0.6 (Infrastructure Hardening - NEW)
# P1: Epic 0.5, Epic 0.75 (AI Model Foundation)
# P2: Epic 11 (Kiosk - 1st UI), Epic 9 (Admin - 2nd UI)
# P3: Epic 5, Epic 10 (Regulator - 3rd UI)
# P4: Epic 6, Epic 4
# P5: Epic 7, Epic 8, Epic 12 (NEW - Engagement)
# P6: Epic 3 (Dashboard - LAST UI, needs Epic 4,5,6)

generated: 2026-01-01
project: farmer-power-platform
tracking_system: file-system
story_location: _bmad-output/sprint-artifacts

development_status:
  # ═══════════════════════════════════════════════════════════════════════════
  # P0: FOUNDATION (Done/In Progress)
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 0: Platform Infrastructure Foundation
  epic-0: done
  0-1-mcp-grpc-infrastructure: done  # github_issue: 11
  0-2-mongodb-integration-testing: done  # github_issue: 14
  0-3-ci-lint-configuration: done  # github_issue: 15
  epic-0-retrospective: done

  # Epic 1: Farmer Registration & Data Foundation
  # Dependencies: Epic 0
  epic-1: done  # All stories complete
  1-1-plantation-model-service-setup: done
  1-2-factory-and-collection-point-management: done
  1-3-farmer-registration: done
  1-4-farmer-performance-history-structure: done
  1-5-farmer-communication-preferences: done
  1-6-plantation-model-mcp-server: done  # github_issue: 13
  1-7-quality-grading-event-subscription: done  # github_issue: 24
  1-8-region-entity-weather-configuration: done  # github_issue: 25
  1-9-payment-policy-configuration: done  # github_issue: 26
  epic-1-retrospective: done

  # Epic 2: Quality Data Ingestion (REVISED - BLOB_TRIGGER architecture)
  # Dependencies: Epic 0, Epic 1
  epic-2: in-progress  # Reopened for tech debt story 2-10
  2-1-collection-model-service-setup: done  # github_issue: 16
  2-2-source-configuration-cli: done  # github_issue: 17
  2-3-event-grid-trigger-handler: done  # github_issue: 18
  2-4-generic-content-processing-framework: done  # github_issue: 19
  2-5-qc-analyzer-exception-images-ingestion: done  # github_issue: 20
  2-6-document-storage-deduplication: done  # github_issue: 21
  2-7-scheduled-pull-ingestion-framework: done  # github_issue: 22
  2-8-market-prices-pull-mode: covered-by-2-7  # Configuration-only
  2-9-collection-model-mcp-server: done  # github_issue: 23
  2-10-collection-model-repository-refactoring: done  # github_issue: 35 - Tech debt: Pydantic models + repository pattern
  2-11-source-config-cli-schema-alignment: done  # github_issue: 36 - Tech debt: CLI writes nested schema, Collection Model expects flat
  epic-2-retrospective: done

  # Epic 0.4: E2E Test Scenarios for Plantation & Collection Models
  # Dependencies: Epic 0, Epic 1, Epic 2
  # Tests the full stack: Plantation Model, Collection Model, MCP Servers, DAPR events
  epic-0-4: in-progress
  0-4-1-infrastructure-verification: done  # 19 tests in test_00_infrastructure_verification.py
  0-4-2-plantation-mcp-tool-contracts: done  # 14 tests, github_issue: 27
  0-4-3-collection-mcp-tool-contracts: done  # 12 tests, github_issue: 28
  0-4-4-factory-farmer-registration-flow: done  # 6 tests, github_issue: 29
  0-4-5-quality-event-blob-ingestion: done  # 6 tests pass after code review fixes, github_issue: 30
  0-4-6-weather-data-ingestion-mock-ai: done  # 6 tests - Real weather API, mock AI, github_issue: 31
  0-4-7-cross-model-dapr-event-flow: done  # 5 tests passed, github_issue: 37
  0-4-8-tbk-ktda-grading-validation: done  # 6 tests, github_issue: 39, PR: #40, xfail fix: PR #62
  0-4-9-zip-processor-ingestion: done  # 9 tests, github_issue: 63, PR: #64
  epic-0-4-retrospective: optional

  # Epic 0.6: Infrastructure Hardening (ADR Implementation)
  # Dependencies: Epic 0.4 (E2E Tests). Blocks: All future epics
  # Implements ADRs: 004-011 (35 story points total)
  epic-0-6: done
  0-6-1-shared-pydantic-models: done  # ADR-004, 5 points, github_issue: 41, PR: #42
  0-6-2-shared-logging-module: done  # ADR-009, 3 points, github_issue: 43, PR: #44
  0-6-3-grpc-retry-ai-model-client: done  # ADR-005, 2 points, github_issue: 45
  0-6-4-grpc-retry-iteration-resolver: done # ADR-005, 2 points, github_issue: 47
  0-6-5-plantation-streaming-subscriptions: done  # ADR-010/011, 5 points, github_issue: 49, PR: #50
  0-6-6-collection-streaming-subscriptions: done  # ADR-010/011, 5 points, github_issue: 51, PR: #52
  0-6-7-dapr-resiliency-config: done  # ADR-006, 2 points, github_issue: 53, PR: #54
  0-6-8-dead-letter-queue-handler: done  # ADR-006, 3 points, github_issue: 55, prereq: 0.6.5/0.6.6
  0-6-9-source-config-cache-change-streams: done  # ADR-007, 5 points, github_issue: 57, prereq: 0.6.8
  0-6-10-linkage-field-validation: done  # ADR-008, 3 points, github_issue: 59, prereq: 0.6.5, 0.6.8, code-review: APPROVED
  epic-0-6-retrospective: done  # 2026-01-02: epic-0-6-retro-2026-01-02.md

  # ═══════════════════════════════════════════════════════════════════════════
  # P1: HORIZONTAL INFRASTRUCTURE
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 0.5: Frontend & BFF Infrastructure (ADR-002, ADR-003)
  # Dependencies: Epic 0, Epic 0.4
  # Strategy: Backend-first approach - BFF complete before React frontend
  # Order: 0.5.1a-d → 0.5.2 → 0.5.3 → 0.5.4 → (0.5.5, 0.5.6) → 0.5.7 → 0.5.8 (deferred)
  epic-0-5: in-progress

  # Story 0.5.1 split into 4 sub-stories (was 5 points, now 9 total)
  0-5-1a-collection-grpc-service: done  # 2 points - Proto + gRPC server (4 methods), github_issue: 65
  0-5-1b-bff-plantation-client-read: done  # 3 points - Base client + 13 read methods, github_issue: 67, PR: #68
  0-5-1c-bff-plantation-client-write: done  # 2 points - 11 write methods (create/update/delete), github_issue: 69, PR: #70
  0-5-1d-bff-collection-client: done  # 2 points - 4 document query methods, github_issue: 71, PR: #72

  0-5-2-bff-service-setup: done  # 3 points - FastAPI BFF scaffold with DAPR sidecar, github_issue: 73
  0-5-3-bff-auth-middleware: done  # 3 points - Dual-mode JWT validation (mock + B2C), github_issue: 75, pr: 76
  # Story 0.5.4 split into 0.5.4a + 0.5.4b per ADR-012 (Party Mode 2026-01-03)
  0-5-4a-bff-client-response-wrappers: done  # 3 points - Response wrappers + migrate 7 client methods, github_issue: 77, pr: 78
  0-5-4b-bff-api-routes: done  # 5 points - 13 read + 11 write endpoints, github_issue: 79, pr: 80
  0-5-5-shared-component-library: done  # 3 points - @fp/ui-components with MUI v6, github_issue: 82, pr: 83
  0-5-6-shared-auth-library: done  # 3 points - @fp/auth with mock provider, github_issue: 84
  0-5-7-factory-portal-scaffold: backlog  # 3 points - React app with routing and layout
  0-5-8-azure-ad-b2c-configuration: deferred  # 5 points - Production deployment only
  epic-0-5-retrospective: optional

  # Epic 0.75: AI Model Foundation (NEW - 2025-12-28)
  # Dependencies: Epic 0. Blocks: Epic 5, 6, 8, 12
  # Updated 2025-12-28: Added conversational agent type, Action Plan & Voice agent configs
  epic-0-75: backlog
  0-75-1-ai-model-service-setup: backlog
  0-75-2-llm-gateway-model-routing: backlog  # Includes cost attribution metrics
  0-75-3-agent-framework: backlog  # extractor, explorer, generator, router, conversational types
  0-75-4-prompt-management: backlog
  0-75-5-rag-infrastructure: backlog  # Includes embedding model, farmer-cli commands
  0-75-6-ai-model-mcp-clients: backlog
  0-75-7-ai-security-patterns: backlog  # Prompt injection, PII handling
  0-75-8-knowledge-model-agent-configs: backlog  # triage, disease, weather, technique, trend agents
  0-75-9-triage-feedback-loop: backlog
  0-75-10-action-plan-agent-config: backlog  # action-plan-generator-v1
  0-75-11-voice-advisor-agent-config: backlog  # voice-advisor-v1 (conversational type)
  epic-0-75-retrospective: optional

  # ═══════════════════════════════════════════════════════════════════════════
  # P2: FIRST FRONTEND APPS (Simple React validation)
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 11: Registration Kiosk PWA The (1st UI - SIMPLEST)
  # Dependencies: Epic 0.5, Epic 1
  epic-11: backlog
  11-1-registration-kiosk-application-scaffold: backlog
  11-2-farmer-registration-workflow: backlog
  11-3-collection-point-assignment: backlog
  11-4-farmer-id-card-printing: backlog
  epic-11-retrospective: optional

  # Epic 9: Platform Admin Portal (2nd UI - Simple CRUD)
  # Dependencies: Epic 0.5, Epic 1
  epic-9: backlog
  9-1-platform-admin-application-scaffold: backlog
  9-2-factory-onboarding-wizard: backlog
  9-3-user-management-dashboard: backlog
  9-4-platform-health-dashboard: backlog
  epic-9-retrospective: optional

  # ═══════════════════════════════════════════════════════════════════════════
  # P3: AI DIAGNOSIS + ANALYTICS UI
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 5: Knowledge Model (Quality Diagnosis)
  # Dependencies: Epic 0.75, Epic 1, Epic 2
  # Updated 2025-12-28: Restructured to focus on business logic, delegates AI to Epic 0.75
  epic-5: backlog
  5-1-knowledge-model-service-setup: backlog  # Dapr, Analysis DB - NO AI framework setup
  5-2-event-aggregation-engine: backlog  # Business rules for batching events
  5-3-analysis-type-disease-detection: backlog  # Output schema, triggers - agent in Epic 0.75.8
  5-4-analysis-type-weather-impact: backlog  # Lag correlation rules - agent in Epic 0.75.8
  5-5-analysis-type-technique-assessment: backlog  # Thresholds - agent in Epic 0.75.8
  5-6-analysis-type-trend-analysis: backlog  # Schedule, stats - agent in Epic 0.75.8
  5-7-knowledge-model-mcp-server: backlog
  epic-5-retrospective: optional

  # Epic 10: Regulator Dashboard (3rd UI - Read-only analytics)
  # Dependencies: Epic 0.5, Epic 2
  epic-10: backlog
  10-1-regulator-application-scaffold: backlog
  10-2-national-quality-overview: backlog
  10-3-regional-quality-comparison: backlog
  10-4-leaf-type-distribution-export-readiness: backlog
  epic-10-retrospective: optional

  # ═══════════════════════════════════════════════════════════════════════════
  # P4: ACTION PLANS + NOTIFICATIONS
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 6: Weekly Action Plans
  # Dependencies: Epic 0.75, Epic 5
  # Updated 2025-12-28: Restructured to focus on business logic, delegates AI to Epic 0.75.10
  epic-6: backlog
  6-1-action-plan-model-service-setup: backlog  # Dapr, scheduled jobs - agent in Epic 0.75.10
  6-2-weekly-action-plan-generation: backlog  # Workflow, recommendation schema
  6-3-farm-scale-aware-recommendations: backlog  # Business rules per scale
  6-4-dual-format-output: backlog  # Report + SMS + TTS formats
  6-5-multilingual-output: backlog  # Language requirements
  6-6-action-plan-mcp-server: backlog
  epic-6-retrospective: optional

  # Epic 4: Farmer SMS Feedback
  # Dependencies: Epic 1, Epic 2
  epic-4: backlog
  4-1-notification-model-service-setup: backlog
  4-2-sms-message-generation: backlog
  4-3-sms-cost-optimization: backlog
  4-4-sms-delivery-assurance: backlog
  4-5-lead-farmer-escalation: backlog
  4-6-inbound-keyword-handling: backlog
  4-7-group-and-regional-messaging: backlog
  epic-4-retrospective: optional

  # ═══════════════════════════════════════════════════════════════════════════
  # P5: VOICE + ENGAGEMENT
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 7: Voice IVR Experience
  # Dependencies: Epic 4, Epic 6
  epic-7: backlog
  7-1-voice-ivr-service-setup: backlog
  7-2-caller-id-farmer-identification: backlog
  7-3-language-selection-menu: backlog
  7-4-action-plan-tts-playback: backlog
  7-5-navigation-and-help-options: backlog
  epic-7-retrospective: optional

  # Epic 8: Voice Quality Advisor (Conversational AI)
  # Dependencies: Epic 0.75, Epic 5, Epic 6, Epic 7
  # Updated 2025-12-28: Restructured to focus on business logic, delegates AI to Epic 0.75.11
  epic-8: backlog
  8-1-conversational-ai-service-setup: backlog  # Telephony integration - agent in Epic 0.75.11
  8-2-speech-to-text-requirements: backlog  # STT accuracy targets, not provider setup
  8-3-intent-classification: backlog  # Intent categories and responses
  8-4-personalized-response-requirements: backlog  # MCP context, personalization rules
  8-5-guided-dialogue-flow: backlog  # Turn limits, constraints
  8-6-streaming-response-delivery: backlog  # Latency requirements
  8-7-sms-fallback-handling: backlog
  epic-8-retrospective: optional

  # Epic 12: Farmer Engagement & Motivation (NEW - 2025-12-28)
  # Dependencies: Epic 0.75, Epic 1
  # 9th Domain Model: Engagement Model
  epic-12: backlog
  12-1-engagement-model-service-setup: backlog
  12-2-streak-calculator: backlog
  12-3-level-progression-system: backlog
  12-4-milestone-detection-tracking: backlog
  12-5-motivation-state-machine: backlog
  12-6-category-mapping-service: backlog
  12-7-engagement-model-mcp-server: backlog
  12-8-celebration-event-emission: backlog
  epic-12-retrospective: optional

  # ═══════════════════════════════════════════════════════════════════════════
  # P6: COMPLEX DASHBOARD (LAST - Requires Epic 0.5, 1, 2, 4, 5, 6)
  # ═══════════════════════════════════════════════════════════════════════════

  # Epic 3: Factory Manager Dashboard (4th UI - MOST COMPLEX)
  # Dependencies: Epic 0.5, Epic 1, Epic 2, Epic 4, Epic 5, Epic 6
  # Note: BFF setup moved to Epic 0.5 (Story 0.5.6)
  epic-3: backlog
  3-1-farmer-quality-overview-grid: backlog
  3-2-farmer-categorization: backlog
  3-3-dashboard-filtering: backlog
  3-4-one-click-farmer-contact: backlog
  3-5-daily-report-auto-generation: backlog
  3-6-dashboard-performance-optimization: backlog
  3-7-factory-owner-roi-dashboard: backlog
  3-8-factory-admin-settings-ui: backlog
  3-9-command-center-screen-implementation: backlog
  3-10-farmer-detail-screen: backlog
  3-11-sms-preview-and-compose: backlog
  epic-3-retrospective: optional