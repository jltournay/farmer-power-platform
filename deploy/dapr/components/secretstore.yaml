# DAPR Secret Store Components for Farmer Power Platform
#
# This file contains secret store configurations for different environments.
# Story 2.7: Used by PullDataFetcher for API key authentication.
#
# Azure Key Vault (Production)
# - Requires AKS Managed Identity with Key Vault access
# - Set AZURE_KEY_VAULT_NAME environment variable
#
# Kubernetes Secrets (Development/Local)
# - Uses Kubernetes native secrets
# - Suitable for local development with Minikube/Kind

---
# Azure Key Vault Secret Store (Production)
# Uncomment and configure for production deployments on AKS
#
# Prerequisites:
# 1. Create Azure Key Vault in the same resource group
# 2. Enable Managed Identity on AKS cluster
# 3. Grant Key Vault Secrets User role to the managed identity
# 4. Set AZURE_KEY_VAULT_NAME environment variable
#
# apiVersion: dapr.io/v1alpha1
# kind: Component
# metadata:
#   name: azure-keyvault
#   namespace: farmer-power
# spec:
#   type: secretstores.azure.keyvault
#   version: v1
#   metadata:
#     - name: vaultName
#       value: "${AZURE_KEY_VAULT_NAME}"
#     - name: azureClientId
#       value: "" # Uses workload identity if empty

---
# Kubernetes Secrets Store (Development/Local)
# Default secret store for local development
apiVersion: dapr.io/v1alpha1
kind: Component
metadata:
  name: kubernetes-secrets
  namespace: default
spec:
  type: secretstores.kubernetes
  version: v1
  metadata: []
