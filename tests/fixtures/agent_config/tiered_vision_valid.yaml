agent_id: leaf-quality-analyzer
type: tiered-vision
version: "1.0.0"
status: draft
description: Cost-optimized image analysis for tea leaf quality
input:
  event: collection.image.received
  schema:
    required:
      - image_url
      - farmer_id
output:
  event: ai.vision.complete
  schema:
    fields:
      - classification
      - confidence
      - diagnosis
llm: null
rag:
  enabled: true
  knowledge_domains:
    - plant_diseases
    - visual_symptoms
  top_k: 3
  min_similarity: 0.75
tiered_llm:
  screen:
    model: anthropic/claude-3-haiku
    temperature: 0.1
    max_tokens: 200
  diagnose:
    model: anthropic/claude-3-5-sonnet
    temperature: 0.3
    max_tokens: 2000
routing:
  screen_threshold: 0.7
  healthy_skip_threshold: 0.85
  obvious_skip_threshold: 0.75
metadata:
  author: test-user
